## 微信公众号发布流程和工具

### 目的

本文介绍"摸个鱼"微信公众号内容准备和发布流程,以及过程中使用的工具, 包括

- 配置GitHub
- 配置Typora Theme
- 配置PicGo 上传图片
- 操作示例

**名词解释**

Typora: 一个多平台的markdown 离线编辑器. 

GitHub: 流行的在线代码版本控制服务

GitHub Repo: 代码仓库, 可理解为一个项目的代码或文档库

GitHub Branch: 代码分支. GitHub多人可以多个分支上开发, 最终会Merge(合并)到master主分支. 也可以不使用分支, 所有操作都在master 主分支上进行. 

PicGo: 图片上传桌面客户端.可配置多种图床服务.

OSS: 阿里云的对象储存服务. 文件总大小5GB 以内免费.

### 配置GitHub

1. 注意账号 https://github.com/

2. 下载安装Git 客户端, 有图形界面客户端和命令行客户端. 建议下载命令行客户端. https://git-scm.com/download/win

3. 将你的GitHub account (username and email) 告知 Yaha, 会添加为摸个鱼 repo的协作者中.

4. 初次拉取[repo](https://github.com/ssyzyg/mooorefish)到本地

   1. 开始菜单中搜索并运行 Git Bash![](https://picrepo01.oss-cn-chengdu.aliyuncs.com/img/20200504232307.png)

   2. 本地新建目录并初次拉取repo到此目录下. 

      ```shell
      ##在Git Bash命令行界面上, 运行以下命令
      cd ~/Documents
      mkdir GitHub && cd GitHub
      git clone https://github.com/ssyzyg/mooorefish
      ##可能要输入GitHub用户名(邮箱)和密码
      ```

   3. 成功执行完以上命令后, 在"我的文档"下多了 `GitHub/moorefish`目录. 

更多参考: https://www.jianshu.com/p/072587b47515

### 配置Typora Theme

1. 下载并安装 Typora. https://typora.io/
2. 运行Typora![](https://picrepo01.oss-cn-chengdu.aliyuncs.com/img/20200504233923.png)
3. 打开`偏好设置` (快捷键 ctrl+,), 进入 外观 - 获取主题, 搜索 `Vue`, 进入 http://theme.typora.io/theme/Vue/, 下载`typora-vue-theme-master.zip`到本地.
   ![](https://picrepo01.oss-cn-chengdu.aliyuncs.com/img/20200504234139.png)
4. 点击`打开主题文件夹`, 解压前步zip包, 将`vue`文件夹和 `.css`放到主题文件夹中. 
   ![](https://picrepo01.oss-cn-chengdu.aliyuncs.com/img/20200504234727.png)
5. 重启 Typora, 在"主题"菜单中选择Vue. 



### 配置PicGo 上传图片

1. 下载并安装 PicGo 2.2.2 https://github.com/Molunerfinn/PicGo/releases/download/v2.2.2/PicGo-Setup-2.2.2.exe

2. 运行PicGo ![](https://picrepo01.oss-cn-chengdu.aliyuncs.com/img/20200504235725.png)

3. 在"图床设置"中选择"阿里云OSS",并填入以下信息,并设置为默认图床

   > 设定KeyID: LTAI4XXXXX
   >
   > 设定KeySecret: ouHupXXXX
   >
   > 设定存储空间名: picrepo01
   >
   > 确认存储区域: oss-cn-chengdu
   >
   > 指定储存路径: imag02/![img](https://cdn.nlark.com/yuque/0/2020/png/1205973/1588442896035-17783626-144e-415a-804c-3fb172f85210.png)

4. [可选]在"PicGo设置"中启动快捷键 `Ctrl+Alt+P` 快速上传.  当图片在系统剪切板中时(Ctrl+C,或者截图操作过后), 按下快捷键,秒级上传完成.

5. [可选]在"上传区" 选择链接格式为"Markdown". 上传完成后,系统粘贴板中会存在Markdown格式的图片链接,直接在Markdown编辑器中粘贴就插入了图片.![](https://picrepo01.oss-cn-chengdu.aliyuncs.com/img/20200505075151.png)

### 操作示例

此示例演示一篇文章从头到尾的操作过程. 不包括 "写作计划" 和 ＂发布计划＂．　

1. Git 拉取Repo到本地.  参考 "配置GitHub"章节. 如果不是初次拉取, 则在Git Bash中执行

   ```shell
   #假设本地Repo是在"我的文档"下
   cd ~/Documents/GitHub/moorefish
   git pull
   ```

2. 新建或编辑md文件, 推荐使用Typora.  内容页面注意插入开头和结尾模板(开发中).

3. 保存md文件到本地Repo, 比如 `~/Documents/GitHub/moorefish` .  路径中的`~` 是Home目录, Win10下是 `/c/Users/<username>`

4. Git Bash命令行中执行以提交变更. 

   ```shell
   #查看状态
   git status
   #添加所有更新的文件到本地Repo数据库, 可多次添加.
   git add -A
   #提交所有已添加的文件到本地Repo数据库
   git commit -m "some detailed message"
   #拉取最新的代码到本地 (如果在自己编辑期间有人更新过repo)
   git pull --rebase
   #将本地repo推送到远程repo. 
   git push
   ```

   ![](https://picrepo01.oss-cn-chengdu.aliyuncs.com/img/20200505083213.png)

5. 其他人可拉取最新的代码, 也可在GitHub网页上查看最新的版本, https://github.com/ssyzyg/mooorefish
6. 发布到微信公众号
   1. 在Typora打开repo中的md文件, 确定主题是Vue
   2. 从Typora编辑/预览框直接全选复制,粘贴到公众号后台素材编辑框里.样式会保留, **图片自动加水印并上传.**
   3. 公众号后台,制作或选取题图,编辑摘要
   4. 保存/预览/发布文章.

